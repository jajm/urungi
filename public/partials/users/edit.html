<div class="modal-header ng-scope">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-close"></i></button>
    <h4 ng-if="mode == 'new'" class="modal-title" translate>New User</h4>
    <h4 ng-if="mode != 'new'" class="modal-title" translate>Edit User</h4>
</div>

<div class="modal-body ng-scope">
    <div class="panel panel-default" style="background-color: #eee;">

        <div class="panel-body">
            <form name="myForm">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="username" class="control-label" translate>User Nick</label>
                            <input id="username"  ng-disabled="mode != 'new'" class="form-control" ng-model="_User.userName" required>
                            <div role="alert"><span class="error" ng-show="myForm.username.$error.required" translate>User Nick is required</span> </div>

                        </div>
                        <div class="form-group">
                            <label for="fname" class="control-label" translate>First Name</label>
                            <input id="fname" class="form-control" ng-model="_User.firstName" required>
                            <div role="alert"><span class="error" ng-show="myForm.fname.$error.required" translate>First Name is required</span> </div>
                        </div>
                        <div class="form-group">
                            <label for="lname" class="control-label" translate>Last Name</label>
                            <input id="lname" class="form-control" ng-model="_User.lastName" required>
                            <div role="alert"><span class="error" ng-show="myForm.lname.$error.required" translate>Last Name is required</span> </div>
                        </div>
                        <div class="form-group">
                            <label for="email" class="control-label" translate>email</label>
                            <input id="email" class="form-control" ng-model="_User.email" required>
                            <div role="alert"><span class="error" ng-show="myForm.email.$error.required" translate>email is required</span> </div>
                        </div>
                        <div ng-if="mode == 'new'" class="checkbox">
                            <label>
                                <input type="checkbox" id="sendPassword" ng-model="_User.sendPassword" >
                                <p translate>Send password through email</p>
                            </label>
                        </div>

                        <div  ng-show="(_User.sendPassword == false && mode == 'new') || (mode == 'edit')" class="form-group">
                            <label for="email" class="control-label" translate>Password</label>
                            <table>
                                <tr>
                                    <td>
                                        <input id="pwd1" class="form-control" placeholder="Introduce password" ng-model="_User.pwd1" required>
                                    </td>
                                    <td>
                                        <input id="pwd2" class="form-control" placeholder="Repeat password" ng-model="_User.pwd2" required>
                                    </td>
                                </tr>
                            </table>
                            <div role="alert"><span class="error text-danger" >{{passwordMessage}}</span> </div>
                        </div>

                        <div  ng-show="(mode == 'edit' && _User.email)" class="form-group">
                              <button class="btn btn-warning" translate>Reset user password</button>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="title" class="control-label" translate>Title</label>
                            <input id="title" class="form-control" ng-model="_User.title" >
                        </div>

                        <div class="form-group">
                            <label for="department" class="control-label" translate>Department</label>
                            <input id="department" class="form-control" ng-model="_User.department" >
                        </div>

                        <div class="form-group">
                            <label for="businessUnit" class="control-label" translate>Business unit</label>
                            <input id="businessUnit" class="form-control" ng-model="_User.businessUnit" >
                        </div>

                        <div class="form-group">
                            <label for="unit" class="control-label" translate>Unit</label>
                            <input id="unit" class="form-control" ng-model="_User.unit" >
                        </div>

                        <div class="form-group">
                            <label for="brand" class="control-label" translate>Brand</label>
                            <input id="brand" class="form-control" ng-model="_User.brand" >
                        </div>
                    </div>
                </div>

                <div ng-if="alertMessage && alertMessage != ''" class="alert-block">{{alertMessage}}</div>

                <div class="container-fluid">
                    <button type="button" class="btn btn-info ng-pristine ng-valid pull-right"  ng-click="checkForNewUser()" translate>Save</button>
                    <button type="button" class="btn btn-white pull-right" data-dismiss="modal" translate>Close</button>

                </div>
            </form>
        </div> <!--body-->
    </div><!--panel-->
</div>
